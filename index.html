<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test d'adaptation au changement</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #121212; /* Fond sombre */
            color: #ffffff; /* Texte clair */
            margin: 0;
            padding: 20px;
        }
        .card {
            max-width: 800px;
            margin: 0 auto;
            background: #1e1e1e; /* Fond légèrement plus clair */
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }
        .title {
            text-align: center;
            font-size: 26px;
            font-weight: bold;
            margin-bottom: 20px;
            color: #00ff7f; /* Vert lumineux */
        }
        .question {
            font-size: 20px;
            margin: 20px 0;
        }
        .answers button {
            display: block;
            width: 100%;
            margin: 10px 0;
            padding: 15px;
            border: none;
            border-radius: 5px;
            font-size: 18px;
            cursor: pointer;
            font-weight: bold;
            background-color: #6c757d; /* Gris neutre */
            color: #ffffff;
        }
        .answers button:hover {
            background-color: #5a6268; /* Gris plus foncé */
        }
        .results {
            text-align: center;
            margin-top: 20px;
        }
        .progress-bar-container {
            width: 100%;
            background-color: #3a3a3a;
            border-radius: 10px;
            overflow: hidden;
            margin: 15px 0;
        }
        .progress-bar {
            height: 25px;
            border-radius: 10px;
        }
        .progress-bar.green {
            background-color: #28a745; /* Vert */
        }
        .progress-bar.orange {
            background-color: #ffc107; /* Orange */
        }
        .progress-bar.red {
            background-color: #dc3545; /* Rouge */
        }
        .download-btn {
            display: inline-block;
            margin-top: 20px;
            padding: 15px 30px;
            background-color: #00ff7f;
            color: #000;
            text-decoration: none;
            border-radius: 5px;
            font-size: 18px;
        }
        .download-btn:hover {
            background-color: #00cc66;
        }
        .feedback h3 {
            color: #00ff7f;
        }
        .feedback p {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="card">
        <h1 class="title">Test d'adaptation au changement</h1>
        <div id="question-container" class="question"></div>
        <div id="answers" class="answers"></div>
    </div>

    <script>
        const questions = [
            {
                text: "Un collègue change de méthode sans vous prévenir. Que faites-vous ?",
                options: [
                    { text: "J'adapte immédiatement ma méthode.", effects: { "Flexibilité": 2, "Collaboration": 1 } },
                    { text: "Je propose une discussion.", effects: { "Collaboration": 2 } },
                    { text: "Je continue avec ma méthode.", effects: { "Flexibilité": -1 } },
                    { text: "Je demande des clarifications.", effects: { "Collaboration": 1, "Flexibilité": 1 } }
                ]
            },
            {
                text: "On vous demande de résoudre un problème inattendu en 1 heure. Que faites-vous ?",
                options: [
                    { text: "Je me concentre et travaille rapidement.", effects: { "Gestion du Stress": 2, "Analyse": 1 } },
                    { text: "J'analyse calmement la situation.", effects: { "Analyse": 2 } },
                    { text: "Je demande de l'aide.", effects: { "Collaboration": 1 } },
                    { text: "Je repousse la tâche.", effects: { "Gestion du Stress": -1 } }
                ]
            },
            {
                text: "Un conflit éclate dans votre équipe. Que faites-vous ?",
                options: [
                    { text: "J'interviens immédiatement pour calmer la situation.", effects: { "Leadership": 2, "Collaboration": 1 } },
                    { text: "J'observe avant d'agir.", effects: { "Analyse": 1 } },
                    { text: "Je délègue à un supérieur.", effects: { "Leadership": -1 } },
                    { text: "Je laisse l'équipe gérer seule.", effects: { "Collaboration": -1 } }
                ]
            },
            {
                text: "Un nouveau manager est nommé avec des méthodes totalement différentes. Comment réagissez-vous ?",
                options: [
                    { text: "J'observe et m'adapte progressivement à ses attentes.", effects: { "Flexibilité": 2, "Adaptabilité": 1 } },
                    { text: "Je pose des questions pour comprendre sa vision.", effects: { "Communication": 1 } },
                    { text: "Je continue à travailler comme avant.", effects: { "Flexibilité": -1 } },
                    { text: "Je me montre réticent au changement.", effects: { "Adaptabilité": -1 } }
                ]
            },
            {
                text: "Vous devez former une nouvelle recrue à des outils que vous maîtrisez peu. Que faites-vous ?",
                options: [
                    { text: "Je me forme rapidement avant de transmettre mes connaissances.", effects: { "Apprentissage": 2, "Initiative": 1 } },
                    { text: "Je propose de collaborer pour apprendre ensemble.", effects: { "Collaboration": 2 } },
                    { text: "Je demande à un collègue plus expérimenté de s'en charger.", effects: { "Responsabilité": -1 } },
                    { text: "Je me débrouille en improvisant.", effects: { "Créativité": 1 } }
                ]
            },
            {
                text: "Votre entreprise annonce une transformation digitale majeure. Quelle est votre réaction ?",
                options: [
                    { text: "Je participe activement pour comprendre et contribuer.", effects: { "Initiative": 2, "Adaptabilité": 1 } },
                    { text: "Je me renseigne pour anticiper les impacts sur mon travail.", effects: { "Analyse": 1 } },
                    { text: "Je reste prudent et attends de voir les effets.", effects: { "Résilience": 1 } },
                    { text: "Je m'oppose au changement, craignant les perturbations.", effects: { "Flexibilité": -1 } }
                ]
            },
            {
                text: "Une crise oblige votre équipe à travailler avec des ressources limitées. Comment réagissez-vous ?",
                options: [
                    { text: "Je propose des solutions créatives pour surmonter les obstacles.", effects: { "Créativité": 2, "Leadership": 1 } },
                    { text: "Je priorise les tâches essentielles pour maintenir l'efficacité.", effects: { "Organisation": 2 } },
                    { text: "Je signale immédiatement les difficultés au management.", effects: { "Responsabilité": 1 } },
                    { text: "Je reste en retrait, espérant que la situation se stabilise.", effects: { "Initiative": -1 } }
                ]
            },
            {
                text: "Une de vos idées est rejetée par votre manager. Que faites-vous ?",
                options: [
                    { text: "Je demande un retour constructif pour améliorer mon idée.", effects: { "Résilience": 2, "Collaboration": 1 } },
                    { text: "Je propose une version modifiée de l'idée.", effects: { "Créativité": 1 } },
                    { text: "Je ne propose plus d'idées à l'avenir.", effects: { "Résilience": -1 } },
                    { text: "Je critique la décision devant mes collègues.", effects: { "Communication": -1 } }
                ]
            },
            {
                text: "Vous remarquez une baisse de performance dans votre équipe. Comment réagissez-vous ?",
                options: [
                    { text: "J'organise une réunion pour comprendre et résoudre les problèmes.", effects: { "Leadership": 2, "Collaboration": 1 } },
                    { text: "Je mets en place un suivi individuel pour accompagner les collaborateurs.", effects: { "Empathie": 2 } },
                    { text: "Je signale la situation sans m'impliquer davantage.", effects: { "Responsabilité": -1 } },
                    { text: "J'attends que la situation s'améliore naturellement.", effects: { "Initiative": -1 } }
                ]
            },
            {
                text: "Une tâche inhabituelle vous est confiée avec peu d'indications. Que faites-vous ?",
                options: [
                    { text: "Je prends l'initiative de définir une approche claire.", effects: { "Initiative": 2, "Analyse": 1 } },
                    { text: "Je cherche des exemples ou des ressources similaires.", effects: { "Apprentissage": 1 } },
                    { text: "Je reporte la tâche en attendant plus de détails.", effects: { "Responsabilité": -1 } },
                    { text: "Je délègue cette tâche à un collègue.", effects: { "Collaboration": -1 } }
                ]
            },
            {
                text: "Votre équipe doit adopter un nouvel outil digital complexe. Comment agissez-vous ?",
                options: [
                    { text: "Je propose une formation collective pour faciliter la transition.", effects: { "Leadership": 1, "Collaboration": 2 } },
                    { text: "Je me familiarise avec l'outil pour devenir une ressource pour les autres.", effects: { "Apprentissage": 2 } },
                    { text: "Je fais juste ce qui est nécessaire pour m'adapter.", effects: { "Flexibilité": 1 } },
                    { text: "Je préfère rester sur les anciens outils.", effects: { "Adaptabilité": -1 } }
                ]
            },
            {
                text: "Votre supérieur vous demande de gérer un conflit entre deux collègues. Que faites-vous ?",
                options: [
                    { text: "Je facilite une discussion pour résoudre le conflit.", effects: { "Collaboration": 2, "Leadership": 1 } },
                    { text: "J'écoute les deux parties séparément pour comprendre la situation.", effects: { "Empathie": 2 } },
                    { text: "Je transmets le problème à une autre personne compétente.", effects: { "Responsabilité": -1 } },
                    { text: "Je les laisse gérer la situation eux-mêmes.", effects: { "Leadership": -1 } }
                ]
            },
            {
                text: "Un changement soudain modifie vos priorités professionnelles. Quelle est votre réaction ?",
                options: [
                    { text: "Je réorganise immédiatement mon emploi du temps.", effects: { "Organisation": 2, "Flexibilité": 1 } },
                    { text: "Je discute avec mon manager pour clarifier les attentes.", effects: { "Communication": 1 } },
                    { text: "Je reste focalisé sur mes tâches initiales.", effects: { "Adaptabilité": -1 } },
                    { text: "Je ressens du stress face à cette situation.", effects: { "Gestion du Stress": -1 } }
                ]
            }
        ];

        let currentQuestionIndex = 0;
        const results = {
            "Flexibilité": 0,
            "Collaboration": 0,
            "Gestion du Stress": 0,
            "Analyse": 0,
            "Résilience": 0,
            "Organisation": 0,
            "Leadership": 0,
            "Créativité": 0,
            "Apprentissage": 0,
            "Empathie": 0,
            "Adaptabilité": 0,
            "Initiative": 0,
            "Communication": 0,
            "Responsabilité": 0
        };

        const maxScores = {
            "Flexibilité": 8,
            "Collaboration": 13,
            "Gestion du Stress": 2,
            "Analyse": 8,
            "Résilience": 5,
            "Organisation": 7,
            "Leadership": 8,
            "Créativité": 6,
            "Apprentissage": 4,
            "Empathie": 3,
            "Adaptabilité": 4,
            "Initiative": 6,
            "Communication": 5,
            "Responsabilité": 1
        };

        function showQuestion() {
            const questionContainer = document.getElementById("question-container");
            const answersContainer = document.getElementById("answers");

            if (currentQuestionIndex < questions.length) {
                const question = questions[currentQuestionIndex];
                questionContainer.textContent = question.text;

                answersContainer.innerHTML = question.options
                    .map((option, index) => `<button onclick="submitAnswer(${index})">${option.text}</button>`)
                    .join("");
            } else {
                showResults();
            }
        }

        function submitAnswer(optionIndex) {
            const question = questions[currentQuestionIndex];
            const selectedOption = question.options[optionIndex];

            for (let dimension in selectedOption.effects) {
                if (results.hasOwnProperty(dimension)) {
                    results[dimension] += selectedOption.effects[dimension];
                }
            }

            currentQuestionIndex++;
            showQuestion();
        }

        function showResults() {
            const card = document.querySelector(".card");

            card.innerHTML = `
                <h1 class="title">Résultats</h1>
                ${generateResultBars()}
                ${generateWrittenFeedback()}
                <a href="#" class="download-btn" onclick="downloadResults()">Télécharger le rapport</a>
            `;
        }

        function generateResultBars() {
            return Object.entries(results)
                .map(([dimension, score]) => {
                    const maxScore = maxScores[dimension] || 1;
                    const percentage = (score / maxScore) * 100;
                    const barColor = percentage >= 75 ? "green" : percentage >= 50 ? "orange" : "red";
                    return `
                        <div>
                            <p><strong>${dimension}</strong>: ${Math.round(percentage)}%</p>
                            <div class="progress-bar-container">
                                <div class="progress-bar ${barColor}" style="width: ${Math.min(percentage, 100)}%;"></div>
                            </div>
                        </div>
                    `;
                })
                .join("");
        }

        function generateWrittenFeedback() {
            let feedback = '<div class="feedback">';
            for (let [dimension, score] of Object.entries(results)) {
                const maxScore = maxScores[dimension] || 1;
                const percentage = (score / maxScore) * 100;
                let advice = percentage >= 75
                    ? `Excellente ${dimension}, continuez ainsi !`
                    : percentage >= 50
                    ? `Bonne ${dimension}, mais il y a de la place pour l'amélioration.`
                    : `Travaillez davantage sur votre ${dimension}.`;

                feedback += `<h3>${dimension}</h3><p>${advice}</p>`;
            }
            feedback += '</div>';
            return feedback;
        }

        function downloadResults() {
            let report = `Résultats du Test d'adaptation au changement\n---------------------------------------------\n`;
            for (let [dimension, score] of Object.entries(results)) {
                const maxScore = maxScores[dimension] || 1;
                const percentage = (score / maxScore) * 100;
                let advice = '';
                if (percentage >= 75) {
                    advice = `Excellente ${dimension}, continuez ainsi !`;
                } else if (percentage >= 50) {
                    advice = `Bonne ${dimension}, mais il y a de la place pour l'amélioration.`;
                } else {
                    advice = `Travaillez davantage sur votre ${dimension}.`;
                }
                report += `${dimension}: ${score} points (${percentage.toFixed(2)}%)\n${advice}\n\n`;
            }

            const blob = new Blob([report], { type: "text/plain" });
            const url = URL.createObjectURL(blob);

            const a = document.createElement("a");
            a.href = url;
            a.download = "rapport_test_adaptation.txt";
            a.click();

            URL.revokeObjectURL(url);
        }

        showQuestion();
    </script>
</body>
</html>
